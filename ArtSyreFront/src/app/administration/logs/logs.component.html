@if(utilisateurCourant != null && utilisateurCourant.estAdmin) {
<div class="logs-container">
    <!-- En-tête avec Material Card -->
    <mat-card class="header-card">
        <mat-card-header>
            <mat-icon mat-card-avatar class="header-icon">description</mat-icon>
            <mat-card-title>Gestion des Logs</mat-card-title>
            <mat-card-subtitle>Consultation et suivi des actions système</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p class="description">
                Consultez l'historique complet des actions effectuées sur la plateforme.
                Les logs sont organisés par catégories pour faciliter votre navigation et analyse.
            </p>

            <!-- Statistiques rapides -->
            <div class="stats-grid">
                <mat-card class="stat-card">
                    <mat-icon>storage</mat-icon>
                    <div class="stat-content">
                        <span class="stat-label">Total des logs</span>
                        <span class="stat-value">{{ getTotalLogs() }}</span>
                    </div>
                </mat-card>

                <mat-card class="stat-card">
                    <mat-icon>category</mat-icon>
                    <div class="stat-content">
                        <span class="stat-label">Catégories</span>
                        <span class="stat-value">{{ tabs.length }}</span>
                    </div>
                </mat-card>

                <mat-card class="stat-card">
                    <mat-icon>update</mat-icon>
                    <div class="stat-content">
                        <span class="stat-label">Dernière mise à jour</span>
                        <span class="stat-value">{{ getCurrentTime() }}</span>
                    </div>
                </mat-card>
            </div>

            <!-- Fonctionnalités -->
            <mat-expansion-panel class="features-panel">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>info</mat-icon>
                        Fonctionnalités disponibles
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ul class="features-list">
                    <li>
                        <mat-icon>check_circle</mat-icon>
                        <span>Visualisation des logs par catégorie (Tableaux, Utilisateurs, Sécurité, Statistiques et SEO.)</span>
                    </li>
                    <li>
                        <mat-icon>check_circle</mat-icon>
                        <span>Chargement intelligent des données à la demande</span>
                    </li>
                    <li>
                        <mat-icon>check_circle</mat-icon>
                        <span>Affichage horodaté avec format français</span>
                    </li>
                    <li>
                        <mat-icon>check_circle</mat-icon>
                        <span>Navigation rapide entre les différentes catégories</span>
                    </li>
                </ul>
            </mat-expansion-panel>
        </mat-card-content>
    </mat-card>

    <!-- Onglets des logs -->
    <mat-card class="tabs-card">
        <mat-card-content>
            <mat-tab-group [selectedIndex]="selectedIndex" (selectedIndexChange)="onTabChange($event)"
                animationDuration="300ms" class="logs-tabs">
                <mat-tab *ngFor="let tab of tabs; let i = index" [label]="tab.label">
                    <ng-template mat-tab-label>
                        <mat-icon class="tab-icon">{{ getTabIcon(i) }}</mat-icon>
                        {{ tab.label }}
                        <mat-chip *ngIf="tab.loaded" class="log-count-chip">
                            {{ tab.dataSource.data.length }}
                        </mat-chip>
                    </ng-template>

                    <div class="tab-content">
                        <!-- État de chargement -->
                        <div *ngIf="!tab.loaded" class="loading-state">
                            <mat-spinner diameter="50"></mat-spinner>
                            <p>Chargement des logs {{ tab.label }}...</p>
                        </div>

                        <!-- État vide -->
                        <div *ngIf="tab.loaded && tab.dataSource.data.length === 0" class="empty-state">
                            <mat-icon>inbox</mat-icon>
                            <h3>Aucun log disponible</h3>
                            <p>Il n'y a actuellement aucun log dans la catégorie "{{ tab.label }}".</p>
                        </div>

                        <!-- Tableau des logs -->
                        <div *ngIf="tab.loaded && tab.dataSource.data.length > 0" class="table-container">
                            <div class="table-header">
                                <h3>
                                    <mat-icon>list</mat-icon>
                                    Logs {{ tab.label }}
                                </h3>
                                <button mat-stroked-button color="primary" (click)="refreshTab(i)">
                                    <mat-icon>refresh</mat-icon>
                                    Actualiser
                                </button>
                            </div>

                            <table mat-table [dataSource]="tab.dataSource" class="logs-table mat-elevation-z2">
                                <ng-container matColumnDef="created_at">
                                    <th mat-header-cell *matHeaderCellDef>
                                        <mat-icon class="column-icon">schedule</mat-icon>
                                        Date de création
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <div class="date-cell">
                                            <mat-icon>event</mat-icon>
                                            {{ formatDate(element.created_at) }}
                                        </div>
                                    </td>
                                </ng-container>

                                <!-- Colonne Description -->
                                <ng-container matColumnDef="description">
                                    <th mat-header-cell *matHeaderCellDef>
                                        <mat-icon class="column-icon">description</mat-icon>
                                        Description
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <div class="description-cell">
                                            {{ element.description }}
                                        </div>
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="log-row"></tr>
                            </table>
                            <!-- Pagination (optionnelle) -->
                            <!-- <mat-paginator *ngIf="tab.content.length > 10" [length]="tab.content.length" [pageSize]="10"
                                [pageSizeOptions]="[5, 10, 25, 50]" showFirstLastButtons>
                            </mat-paginator> -->
                            <!-- Pagination -->
                            {{ tab.dataSource.data.length }}
                            <mat-paginator
                                [pageSizeOptions]="[5, 10, 25, 100]"
                                [pageSize]="10"
                                [length]="tab.dataSource.data.length"
                                showFirstLastButtons
                                aria-label="Sélecteur de taille de page">
                            </mat-paginator>
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </mat-card-content>
    </mat-card>
</div>
} @else {
<div class="empty-state">
    <p>Vous n'avez pas les droits nécessaires pour accéder à cette section.</p>
</div>
}