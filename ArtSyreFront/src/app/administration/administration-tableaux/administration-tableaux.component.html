@if(utilisateurCourant != null && utilisateurCourant.estAdmin) {
    <div class="admin-tableaux-container">
    <div class="admin-header">
        <h1>Administration des Tableaux</h1>
        <p class="subtitle">Gérez vos tableaux en toute simplicité</p>
    </div>

    <div class="tableaux-panel">
        <div class="filter-section">
            <mat-form-field>
                <mat-label>Filtre</mat-label>
                <input matInput (keyup)="applyFilter($event)"
                    placeholder="Ex. Rechercher un tableau..." #input>
            </mat-form-field>
        </div>

        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource" matSort>

                <!-- ID Column -->
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> ID
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="id-badge">{{row.id}}</span>
                    </td>
                </ng-container>

                <!-- name Column - Correction du % -->
                <ng-container matColumnDef="nom">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="name-cell">{{row.nom}}</span>
                    </td>
                </ng-container>

                <!-- Taille Column -->
                <ng-container matColumnDef="taille">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Taille
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="email-cell">{{row.taille}}</span>
                    </td>
                </ng-container>
                
                <!-- email Column -->
                <ng-container matColumnDef="prix">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Prix
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="email-cell">{{row.prix}}</span>
                    </td>
                </ng-container>

                <!-- dateCreation Column -->
                <ng-container matColumnDef="dateCreation">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Date
                        de création </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="date-cell">{{row.dateCreation |
                            date:'dd/MM/yyyy'}}</span>
                    </td>
                </ng-container>

                <!-- estDansUnPanier Column avec badge -->
                <ng-container matColumnDef="estDansUnPanier">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Dans un panier </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="status-badge"
                            [ngClass]="row.estDansUnPanier === 1 ? 'Panier' : 'En vente'">
                            {{row.estDansUnPanier === 1 ? 'Panier' : 'En vente'}}
                        </span>
                    </td>
                </ng-container>

                <!-- estVendu Column avec badge -->
                <ng-container matColumnDef="estVendu">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Est vendu </th>
                    <td mat-cell *matCellDef="let row">
                        <span class="status-badge"
                            [ngClass]="row.estVendu === 1 ? 'Vendu' : 'En stock'">
                            {{row.estVendu === 1 ? 'Vendu' : 'En stock'}}
                        </span>
                    </td>
                </ng-container>

                <!-- Actions Column -->
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> Actions </th>
                    <td mat-cell *matCellDef="let row" class="actions-cell">
                        <button mat-button class="edit-btn"
                            (click)="editTableau(row)"
                            matTooltip="Modifier ce tableau">
                            <i class="material-icons">edit</i>
                            Modifier
                        </button>
                        <button mat-button class="delete-btn"
                            (click)="confirmDelete(row)"
                            matTooltip="Supprimer ce tableau">
                            <i class="material-icons">delete</i>
                            Supprimer
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row
                    *matRowDef="let row; columns: displayedColumns;"></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell"
                        [attr.colspan]="displayedColumns.length">
                        Aucune donnée ne correspond au filtre "{{input.value}}"
                    </td>
                </tr>
            </table>

            <mat-paginator
                [pageSizeOptions]="[5, 10, 25, 100]"
                [pageSize]="10"
                showFirstLastButtons
                aria-label="Sélecteur de taille de page">
            </mat-paginator>
        </div>
    </div>
</div>
} @else {
    <div class="empty-state">
        <p>Vous n'avez pas les droits nécessaires pour accéder à cette section.</p>
    </div>
}