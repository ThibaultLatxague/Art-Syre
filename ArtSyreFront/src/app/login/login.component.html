<!-- login.component.html -->
<div class="login-container">
    <mat-card class="login-card">
        <mat-card-header>
            <mat-card-title>Connexion</mat-card-title>
            <mat-card-subtitle>Connectez-vous à votre compte</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

                <!-- Email -->
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Adresse email</mat-label>
                    <input matInput
                        formControlName="email"
                        placeholder="votre@email.com"
                        type="email"
                        autocomplete="email">
                    <mat-error
                        *ngIf="loginForm.get('email')?.hasError('required')">
                        L'adresse email est obligatoire
                    </mat-error>
                    <mat-error
                        *ngIf="loginForm.get('email')?.hasError('email')">
                        Veuillez saisir une adresse email valide
                    </mat-error>
                    <mat-error
                        *ngIf="loginForm.get('email')?.hasError('emailExists')">
                        Cette adresse email est déjà utilisée
                    </mat-error>
                    <mat-icon matSuffix>email</mat-icon>
                </mat-form-field>

                <!-- Mot de passe -->
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Mot de passe</mat-label>
                    <input matInput
                        formControlName="password"
                        [type]="hidePassword ? 'password' : 'text'"
                        placeholder="Votre mot de passe"
                        autocomplete="new-password">
                    <button mat-icon-button
                        matSuffix
                        type="button"
                        (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hidePassword">
                        <mat-icon>{{hidePassword ? 'visibility_off' :
                            'visibility'}}</mat-icon>
                    </button>
                    <mat-error
                        *ngIf="loginForm.get('password')?.hasError('required')">
                        Le mot de passe est obligatoire
                    </mat-error>
                    <mat-error
                        *ngIf="loginForm.get('password')?.hasError('minlength')">
                        Le mot de passe doit contenir au moins 8 caractères
                    </mat-error>
                    <mat-error
                        *ngIf="loginForm.get('password')?.hasError('passwordStrength')">
                        Le mot de passe doit contenir au moins une majuscule,
                        une minuscule, un chiffre et un caractère spécial
                    </mat-error>
                </mat-form-field>

                <!-- Loading spinner -->
                <div class="loading-container" *ngIf="isLoading">
                    <mat-spinner diameter="30"></mat-spinner>
                    <span>Connexion en cours...</span>
                </div>

                <!-- Boutons -->
                <div class="button-container">
                    <button mat-raised-button
                        color="primary"
                        type="submit"
                        [disabled]="loginForm.invalid || isLoading"
                        class="submit-button">
                        <mat-icon>person_add</mat-icon>
                        S'identifier
                    </button>

                    <button mat-button
                        type="button"
                        (click)="resetForm()"
                        [disabled]="isLoading">
                        Réinitialiser
                    </button>
                </div>

                <!-- Lien de connexion -->
                <div class="login-link">
                    <p>Pas encore de compte ?
                        <a mat-button color="primary" routerLink="/register">Créer un compte</a>
                    </p>
                </div>

            </form>
        </mat-card-content>
    </mat-card>
</div>